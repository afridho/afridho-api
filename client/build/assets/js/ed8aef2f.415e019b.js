"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[776],{4663:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>m,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var t=r(4848),i=r(8453);const a={sidebar_position:1,title:"Instagram Downloader"},o=void 0,s={id:"social media/instagram_downloader",title:"Instagram Downloader",description:"Download media images/videos from Instagram. This API using RapidAPI to get data.",source:"@site/docs/social media/instagram_downloader.md",sourceDirName:"social media",slug:"/social media/instagram_downloader",permalink:"/social media/instagram_downloader",draft:!1,unlisted:!1,editUrl:"https://github.com/afridho/afridho-api/blob/master/client/docs/social media/instagram_downloader.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Instagram Downloader"},sidebar:"tutorialSidebar",previous:{title:"Social Media",permalink:"/category/social-media"},next:{title:"Productivity",permalink:"/category/productivity"}},d={},l=[{value:"<code>GET</code> Endpoint",id:"get-endpoint",level:2},{value:"Environment",id:"environment",level:2},{value:"Source Code",id:"source-code",level:2},{value:"Result",id:"result",level:2},{value:"<a>Instagram Downloader </a>\ud83c\udfc3\ud83c\udffb\u200d\u2642\ufe0f",id:"instagram-downloader-\ufe0f",level:4}];function c(e){const n={a:"a",code:"code",h2:"h2",h4:"h4",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Download media images/videos from Instagram. This API using RapidAPI to get data."}),"\n",(0,t.jsxs)(n.h2,{id:"get-endpoint",children:[(0,t.jsx)(n.code,{children:"GET"})," Endpoint"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"/api/ig\n"})}),"\n",(0,t.jsx)(n.h2,{id:"environment",children:"Environment"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"ENV"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"IGDOWNLOADER_KEYx"})}),(0,t.jsxs)(n.td,{children:["token of ",(0,t.jsx)(n.a,{href:"https://rapidapi.com/maatootz/api/instagram-story-downloader-media-downloader/",children:"RapidApi IG Downloader"}),". 'x' for number. (IGDOWNLOADER_KEY1, IGDOWNLOADER_KEY2, etc)"]})]})})]}),"\n",(0,t.jsx)(n.h2,{id:"source-code",children:"Source Code"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",metastring:'title="ig-downloader.js"',children:"const axios = require('axios');\nconst express = require(\"express\");\nconst router = express.Router();\nrequire('dotenv').config()\nvar recursion_now = 0;\nvar recursion_limit = 20;// backup RapidAPI-KEY recursion process\n\nrouter.get('/', async (req, res) => {\n  res.render(__dirname + '/input');\n  res.end()\n  })\n\nrouter.post('/download', async (req, res) => {\n  const image_from_instagram = await get_instagram_image(req.body.link)\n  if(image_from_instagram[0] == 200){\n    if('error' in image_from_instagram[1]){\n\n        res.render(__dirname + '/input_try_again', {invalid_link : (Object.values(image_from_instagram[1])[0]).replace(\"reomved\", \"removed\")});\n    }else{\n        const title = image_from_instagram[1]?.title\n        const media = image_from_instagram[1]?.media\n        const Type = image_from_instagram[1]?.Type \n\n        if (Type == 'Carousel'){\n            res.render(__dirname + '/download_carousel', {media:media, Type:Type, title:title})\n        }else{\n            const icon = Type == 'Post-Image' ? '\ud83d\udcf7\ufe0f' : '\ud83d\udcf9\ufe0f'\n            res.render(__dirname + '/input_try_again', {valid_link : 'Download success', media : media, icon: icon});\n            }\n        }\n  }else{\n    res.render(__dirname + '/input_try_again', {invalid_link : image_from_instagram[1]});\n    }}\n  )\n\nasync function get_instagram_image(ig_link){\n    recursion_now++;\n    const options = {\n    method: 'GET',\n    url: 'https://instagram-story-downloader-media-downloader.p.rapidapi.com/index',\n    params: {url: ig_link},\n    headers: {\n        'X-RapidAPI-Key' : await RapidAPI_KEY(),\n        'X-RapidAPI-Host': 'instagram-story-downloader-media-downloader.p.rapidapi.com'\n    }};\n\n    return await axios.request(options).then(function (response) {\n        return [response.status, response.data]\n    }).catch(async function (error) {\n        if(error.response.status == 429){\n            if(recursion_now <= recursion_limit){   \n            return get_instagram_image(ig_link)\n            }else{\n                return [error.response.status,Object.values(error.response.data)[0]]\n            }\n        }else{\n            return [error.response.status,Object.values(error.response.data)[0]]\n        }\n    });\n}\n\nasync function RapidAPI_KEY() {\n    filtered_env = Object.fromEntries(Object.entries(process.env).filter(([key]) => key.includes('IGDOWNLOADER_KEY')));\n    var keys = Object.keys(filtered_env);\n    return await filtered_env[keys[ keys.length * Math.random() << 0]];\n};\n\nmodule.exports = router;\n"})}),"\n",(0,t.jsx)(n.h2,{id:"result",children:"Result"}),"\n",(0,t.jsxs)(n.h4,{id:"instagram-downloader-\ufe0f",children:[(0,t.jsx)("a",{href:"/api/ig",target:"_blank",children:"Instagram Downloader "}),"\ud83c\udfc3\ud83c\udffb\u200d\u2642\ufe0f"]})]})}function m(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>s});var t=r(6540);const i={},a=t.createContext(i);function o(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);